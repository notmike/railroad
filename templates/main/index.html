{% extends "main/main.html" %}
{% block content %}
<!-- Header -->
<header id="header">
  <div class="intro">
    <div class="overlay">
      <div class="container">
        <div class="row">
          <div class="col-md-8 col-md-offset-2 intro-text">
            <h1>We Are ChooChoo Continental<span></span></h1>
            <p>Check out our awesome train reservation system!</p>
            <a href="#searchTrains" class="btn btn-custom btn-lg page-scroll">Search Trains</a> </div>
        </div>
      </div>
    </div>
  </div>
</header>


     {% csrf_token %}
       
       <br>
       
  </form>

<!-- Features Section -->
<div id="searchTrains" class="text-center">
  <div class="container">
    <div class="col-md-10 col-md-offset-1 section-title">
      <h2>Search Trains</h2>
    </div>

    <div class="row">
    <form method="POST" action= "{% url 'search' %}"> {% csrf_token %}

        <div class="col-xs-6 col-md-3">
          <h3>From: </h3>
          <select name="stationFrom" id="stationFrom" class="form-control form-control-lg">
            <option value="BOS">Boston, MA - South Station</option>
            <option value="BBY">Boston, MA - Back Bay Station</option>
            <option value="RTE">Route 128, MA</option>
            <option value="PVD">Providence, RI</option>
            <option value="KIN">Kingston, RI</option>
            <option value="WLY">Westerly,RI</option>
            <option value="MYS">Mystic, CT</option>
            <option value="NLC">New London, CT</option>
            <option value="OSB">Old Saybrook, CT</option>
            <option value="NHV">New Haven, CT</option>
            <option value="BRP">Bridgeport, CT</option>
            <option value="STM">Stamford, CT</option>
            <option value="NRO">New Rochelle, NY</option>
            <option value="NYP">New York, NY - Penn Station</option>
            <option value="NWK">Newark, NJ</option>
            <option value="EWR">Newark Liberty Intl. Air., NJ</option>
            <option value="MET">Metro Park, NJ</option>
            <option value="TRE">Trenton, NJ</option>
            <option value="PHL">Philadelphia, PA - 30th Street Station</option>
            <option value="WIL">Wilmington, DE - J.R. Biden, Jr. Station</option>
            <option value="ABE">Aberdeen, MD</option>
            <option value="BAL">Baltimore, MD - Penn Station</option>
            <option value="BWI">BWI Marshall Airport, MD</option>
            <option value="NCR">New Carrollton, MD</option>
            <option value="WAS">Washington, DC - Union Station</option>
          </select>
        </div>
        <div class="col-xs-6 col-md-3">
          <h3>To: </h3>
          <select name="stationTo" id="stationTo" class="form-control form-control-lg">
              <option value="BOS">Boston, MA - South Station</option>
              <option value="BBY">Boston, MA - Back Bay Station</option>
              <option value="RTE">Route 128, MA</option>
              <option value="PVD">Providence, RI</option>
              <option value="KIN">Kingston, RI</option>
              <option value="WLY">Westerly,RI</option>
              <option value="MYS">Mystic, CT</option>
              <option value="NLC">New London, CT</option>
              <option value="OSB">Old Saybrook, CT</option>
              <option value="NHV">New Haven, CT</option>
              <option value="BRP">Bridgeport, CT</option>
              <option value="STM">Stamford, CT</option>
              <option value="NRO">New Rochelle, NY</option>
              <option value="NYP">New York, NY - Penn Station</option>
              <option value="NWK">Newark, NJ</option>
              <option value="EWR">Newark Liberty Intl. Air., NJ</option>
              <option value="MET">Metro Park, NJ</option>
              <option value="TRE">Trenton, NJ</option>
              <option value="PHL">Philadelphia, PA - 30th Street Station</option>
              <option value="WIL">Wilmington, DE - J.R. Biden, Jr. Station</option>
              <option value="ABE">Aberdeen, MD</option>
              <option value="BAL">Baltimore, MD - Penn Station</option>
              <option value="BWI">BWI Marshall Airport, MD</option>
              <option value="NCR">New Carrollton, MD</option>
              <option value="WAS">Washington, DC - Union Station</option>
            </select>
        </div>
        <div class="col-xs-6 col-md-3">
          <h3>Date: </h3>
          <!-- 2017-11-13 to 2018-11-13 -->
          <div>
              <select name="date_year" id="date_year" class="form-control form-control-lg">
                  <option value="2017">2017</option>
                  <option value="2018">2018</option>
                </select>
                <select name="date_month" id="date_month" class="form-control form-control-lg">
                    <option value="01">1</option>
                    <option value="02">2</option>
                    <option value="03">3</option>
                    <option value="04">4</option>
                    <option value="05">5</option>
                    <option value="06">6</option>
                    <option value="07">7</option>
                    <option value="08">8</option>
                    <option value="09">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                  </select>
                  <select name="date_day" id="date_day" class="form-control form-control-lg">
                    <option value="01">1</option>
                    <option value="02">2</option>
                    <option value="03">3</option>
                    <option value="04">4</option>
                    <option value="05">5</option>
                    <option value="06">6</option>
                    <option value="07">7</option>
                    <option value="08">8</option>
                    <option value="09">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                  </select>
          </div>
          
        </div>
        <div class="col-xs-6 col-md-3">
          <h3>Time of day:</h3>
            <select class="form-control" name="time-of-day"> 
              <option value="MOR">Morning</option>
              <option value="AFT">Afternoon</option>
              <option value="EVE">Evening</option>
              <option value="NIT">Night</option>
            </select>
        </div>
        <div class="btn-submit btn-block col-md-12">
         <button name = "submit" type="submit" class="btn btn-custom btn-lg">Search</button>
        </form>
    </form>
        
    </div>
  </div>
</div>
<div class="text-center">
    <div class="container">
        {% if avail_trains %}
        <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">train_id</th>
                <th scope="col">start_station</th>
                <th scope="col">end_station</th>
                <th scope="col">travel_date</th>
                <th scope="col">time_of_day</th>
                <th scope="col">seats_free</th>
                <th scope="col">chosen</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
                {% for each in avail_trains %}
                  <tr>
                    <th scope="row">{{each.train_id}}</th>
                    <td>{{each.start_station}}</td>
                    <td>{{each.end_station}}</td>
                    <td>{{each.travel_date}}</td>
                    <td>{{each.time_of_day}}</td>
                    <td>{{each.seats_free}}</td>
                    <td>{{each.chosen}}</td>
                    <td>
                      <form method="POST" action="/make-reservations/"> {% csrf_token %}
                        <input class="hidden_input" name="ti" type="text" value="{{each.train_id}}">
                        <input class="hidden_input" name="ss" type="text" value="{{each.start_station}}">
                        <input class="hidden_input" name="es" type="text" value="{{each.end_station}}">
                        <input class="hidden_input" name="trd" type="text" value="{{each.travel_date}}">
                        <input class="hidden_input" name="tod" type="text" value="{{each.time_of_day}}">
                        <input class="hidden_input" name="sf" type="text" value="{{each.seats_free}}">
                        <input class="hidden_input" name="cho" type="text" value="{{each.chosen}}">
                        <button class="btn btn-primary btn-sm">Book</button>
                      </form>
                    </td>
                  </tr>
                {% endfor %}
          </table>
          {% endif %}
    </div>
  </div>
<style>
  .hidden_input {
    display: none;
  }
</style>
{% endblock %}
